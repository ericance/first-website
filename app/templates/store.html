{% extends "base.html" %}

{% block content %}
	<div class="container">
		{% for item in items %}	
			<div class="card">
				<div class="item">
					<h1>{{ item.name }}</h1>
					<img src='{{ item.image }}' width="100px" height="100px">
					<p class="price">${{ '%0.2f' | format(item.price|float) }}</p>
					<!-- <form method="POST"> -->
						<button class="add-to-cart" type="submit">Add to Cart</button>
					<!-- <form> -->
				</div>	
			</div>	
		{% endfor %}
	</div>
	<script>
		var buttons = document.getElementsByClassName("add-to-cart")
		for (let i = 0; i < buttons.length; i++) {
			buttons[i].onclick = function() {
				fetch("/store", {
					method: "POST",
					headers: {
						"Content-Type": "application/json"
					},
					body: JSON.stringify({
						id: i + 1
					})
				}).then(response => {
					console.log(response)
				})
			}
		}
	</script>
{% endblock %}